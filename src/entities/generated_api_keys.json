
{
  "title": "Generated API Keys",
  "type": "object",
  "properties": {
    "user_id": {
      "type": "string",
      "title": "User ID",
      "description": "ID of the user who owns this generated API key"
    },
    "api_key": {
      "type": "string",
      "title": "API Key",
      "description": "The generated proxy API key (format: tkz_live_[provider]_[timestamp]_[random])"
    },
    "provider": {
      "type": "string",
      "title": "Provider",
      "description": "Target AI provider or 'universal' for multi-provider support",
      "enum": ["openai", "claude", "anthropic", "gemini", "google", "deepseek", "universal"]
    },
    "token_allocation": {
      "type": "number",
      "title": "Token Allocation",
      "description": "Total number of tokens allocated to this API key"
    },
    "tokens_used": {
      "type": "number",
      "title": "Tokens Used",
      "description": "Number of tokens consumed by this API key",
      "default": 0
    },
    "status": {
      "type": "string",
      "title": "Status",
      "description": "Current status of the API key",
      "enum": ["active", "suspended", "expired", "revoked"],
      "default": "active"
    },
    "expires_at": {
      "type": "string",
      "title": "datetime",
      "description": "Expiration date and time of the API key"
    },
    "created_at": {
      "type": "string",
      "title": "datetime",
      "description": "Creation date and time of the API key"
    },
    "last_used_at": {
      "type": "string",
      "title": "datetime",
      "description": "Last usage date and time of the API key"
    },
    "proxy_type": {
      "type": "string",
      "title": "Proxy Type",
      "description": "Type of proxy functionality",
      "enum": ["universal", "provider_specific"],
      "default": "provider_specific"
    },
    "rate_limit_per_minute": {
      "type": "number",
      "title": "Rate Limit Per Minute",
      "description": "Maximum number of API calls allowed per minute",
      "default": 60
    },
    "allowed_models": {
      "type": "array",
      "title": "Allowed Models",
      "description": "List of AI models this key can access (* for all models)",
      "items": {
        "type": "string"
      },
      "default": ["*"]
    },
    "cost_multiplier": {
      "type": "number",
      "title": "Cost Multiplier",
      "description": "Markup multiplier applied to provider costs (e.g., 1.2 = 20% markup)",
      "default": 1.2,
      "minimum": 1.0
    },
    "upstream_provider_key_id": {
      "type": "string",
      "title": "Upstream Provider Key ID",
      "description": "Reference to the master provider API key used for upstream calls"
    },
    "total_requests": {
      "type": "number",
      "title": "Total Requests",
      "description": "Total number of API requests made with this key",
      "default": 0
    },
    "total_cost": {
      "type": "number",
      "title": "Total Cost",
      "description": "Total cost generated by this API key (with markup)",
      "default": 0
    },
    "upstream_cost": {
      "type": "number",
      "title": "Upstream Cost",
      "description": "Total cost paid to upstream providers",
      "default": 0
    },
    "revenue_generated": {
      "type": "number",
      "title": "Revenue Generated",
      "description": "Total revenue generated from markup (total_cost - upstream_cost)",
      "default": 0
    },
    "metadata": {
      "type": "object",
      "title": "Metadata",
      "description": "Additional configuration and tracking data",
      "properties": {
        "description": {
          "type": "string",
          "title": "Description",
          "description": "User-provided description for this API key"
        },
        "allowed_domains": {
          "type": "array",
          "title": "Allowed Domains",
          "description": "Domains allowed to use this API key (CORS)",
          "items": {
            "type": "string"
          }
        },
        "webhook_url": {
          "type": "string",
          "title": "Webhook URL",
          "description": "URL to notify on usage events"
        },
        "tags": {
          "type": "array",
          "title": "Tags",
          "description": "User-defined tags for organization",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "required": [
    "user_id",
    "api_key", 
    "provider",
    "token_allocation",
    "status",
    "expires_at",
    "created_at"
  ]
}
